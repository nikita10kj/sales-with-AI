{% extends "users/base.html" %}

{% block content %}

<style>
:root {
  --purple: #6f6ae1;
  --purple-dark: #5b55d6;
  --blue: #4f9cff;
  --bg-main: #f6f8fc;
  --card-bg: #ffffff;
  --text-dark: #1f2937;
  --text-muted: #6b7280;
}

/* Layout */
.dashboard-wrapper {
  background: var(--bg-main);
  padding: 32px;
  min-height: 100vh;
  font-family: "Inter", system-ui, sans-serif;
}

.dashboard-title {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 24px;
}

/* Cards */
.stat-card {
  background: linear-gradient(135deg, var(--purple), var(--blue));
  color: #fff;
  border-radius: 20px;
  padding: 22px;
  box-shadow: 0 18px 40px rgba(79,156,255,.35);
  transition: .3s;
}
.stat-card:hover { transform: translateY(-6px); }

.stat-label { font-size: 14px; opacity: .9; }
.stat-value { font-size: 28px; font-weight: 700; }

/* Section */
.section-card {
  background: #fff;
  border-radius: 22px;
  padding: 26px;
  box-shadow: 0 18px 40px rgba(0,0,0,.08);
  margin-top: 30px;
}

/* Table */
.modern-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0 12px;
}

.modern-table thead th {
  font-size: 13px;
  color: var(--text-muted);
  text-transform: uppercase;
}

.modern-table tbody tr {
  background: #f9fbff;
  transition: .3s;
}
.modern-table tbody tr:hover {
  background: #eef3ff;
  transform: scale(1.01);
}

.modern-table td {
  padding: 16px;
  font-size: 14px;
}

.modern-table td:first-child { border-radius: 14px 0 0 14px; }
.modern-table td:last-child { border-radius: 0 14px 14px 0; }

/* Avatar */
.user-avatar {
  width: 38px;
  height: 38px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--purple), var(--blue));
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  margin-right: 10px;
}
</style>

<div class="dashboard-wrapper">

  <div class="dashboard-title">ðŸ‘‘ Super User Dashboard</div>

  {% if superuser %}
  <div class="section-card" style="margin-bottom:20px;">
    ðŸ‘‘ <strong>Super User:</strong> {{ superuser.email }}
  </div>
  {% endif %}

  <div class="row g-4">
    <div class="col-md-4">
      <div class="stat-card">
        <div class="stat-label">Today Logins</div>
        <div class="stat-value">{{ today_logins }}</div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="stat-card">
        <div class="stat-label">This Week</div>
        <div class="stat-value">{{ week_logins }}</div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="stat-card">
        <div class="stat-label">This Month</div>
        <div class="stat-value">{{ month_logins }}</div>
      </div>
    </div>
  </div>

  <div class="section-card">
    <h5 style="font-weight:700;">ðŸ‘¥ All Users ({{ users|length }})</h5>

    <table class="modern-table">
      <thead>
        <tr>
          <th>User</th>
          <th>Email</th>
          <th>Emails Sent</th>
          <th>Last Login</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr>
          <td>
            <span class="user-avatar">{{ user.email|first|upper }}</span>
            {{ user.get_full_name|default:user.email }}
          </td>
          <td>{{ user.email }}</td>
          <td><strong style="color:#4f46e5;">{{ user.email_count }}</strong></td>
          <td>
            {% if user.last_login %}
              {{ user.last_login|timesince }} ago
            {% else %}
              <span style="color:#9ca3af;">Never</span>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4" style="text-align:center;color:#9ca3af;">No users found</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

{% endblock %}
